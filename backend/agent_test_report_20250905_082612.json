{
  "test_summary": {
    "total_tests": 6,
    "successful_tests": 5,
    "success_rate": 0.8333333333333334,
    "test_time": "2025-09-05T08:26:12.444292"
  },
  "detailed_results": {
    "placeholder_to_sql": {
      "total_tests": 4,
      "successful_tests": 4,
      "results": [
        {
          "placeholder_name": "total_sales_amount",
          "success": true,
          "sql_query": "",
          "confidence_score": 0.0,
          "explanation": "SQL生成失败: Expecting value: line 1 column 1 (char 0)",
          "used_tables": [],
          "correction_attempts": 0
        },
        {
          "placeholder_name": "daily_sales_trend",
          "success": true,
          "sql_query": "",
          "confidence_score": 0.0,
          "explanation": "SQL生成失败: Expecting value: line 1 column 1 (char 0)",
          "used_tables": [],
          "correction_attempts": 0
        },
        {
          "placeholder_name": "top_products",
          "success": true,
          "sql_query": "",
          "confidence_score": 0.0,
          "explanation": "SQL生成失败: Expecting value: line 1 column 1 (char 0)",
          "used_tables": [],
          "correction_attempts": 0
        },
        {
          "placeholder_name": "user_age_distribution",
          "success": true,
          "sql_query": "",
          "confidence_score": 0.0,
          "explanation": "SQL生成失败: Expecting value: line 1 column 1 (char 0)",
          "used_tables": [],
          "correction_attempts": 0
        }
      ]
    },
    "task_supplement": {
      "success": true,
      "total_requests": 4,
      "successful_supplements": 0,
      "failed_supplements": 4,
      "overall_confidence": 0.0,
      "processing_time": 0.000899
    },
    "sql_validation": {
      "success": true,
      "validation_status": "passed",
      "errors_count": 0,
      "warnings_count": 0,
      "corrected_sql": null,
      "correction_attempts": 0,
      "confidence_score": 1.0
    },
    "multi_context": {
      "success": true,
      "integration_confidence": 0.6868749996699859,
      "used_contexts": [
        "data_source_ctx",
        "task_ctx"
      ],
      "context_weights": {
        "data_source_ctx": 0.6249999999882451,
        "task_ctx": 0.3750000000117549
      },
      "processing_time": 0.000232,
      "warnings_count": 0
    },
    "full_pipeline": {
      "success": true,
      "steps_completed": 3,
      "overall_confidence": 0.229794238599632,
      "pipeline_results": {
        "context_integration": {
          "integration_id": "integration_1757031972443",
          "integrated_context": {
            "data_sources": {
              "source_id": "doris_test_001",
              "source_type": "doris",
              "database_name": "test_db",
              "available_tables": [
                "user_behavior",
                "sales_order",
                "product_info",
                "user_profile"
              ],
              "table_schemas": {
                "user_behavior": [
                  {
                    "name": "user_id",
                    "type": "bigint",
                    "comment": "用户ID"
                  },
                  {
                    "name": "event_time",
                    "type": "datetime",
                    "comment": "事件时间"
                  },
                  {
                    "name": "event_type",
                    "type": "varchar(50)",
                    "comment": "事件类型"
                  },
                  {
                    "name": "page_path",
                    "type": "varchar(500)",
                    "comment": "页面路径"
                  },
                  {
                    "name": "session_id",
                    "type": "varchar(100)",
                    "comment": "会话ID"
                  }
                ],
                "sales_order": [
                  {
                    "name": "order_id",
                    "type": "bigint",
                    "comment": "订单ID"
                  },
                  {
                    "name": "user_id",
                    "type": "bigint",
                    "comment": "用户ID"
                  },
                  {
                    "name": "order_time",
                    "type": "datetime",
                    "comment": "订单时间"
                  },
                  {
                    "name": "amount",
                    "type": "decimal(10,2)",
                    "comment": "订单金额"
                  },
                  {
                    "name": "status",
                    "type": "varchar(20)",
                    "comment": "订单状态"
                  },
                  {
                    "name": "product_id",
                    "type": "bigint",
                    "comment": "商品ID"
                  }
                ],
                "product_info": [
                  {
                    "name": "product_id",
                    "type": "bigint",
                    "comment": "商品ID"
                  },
                  {
                    "name": "product_name",
                    "type": "varchar(200)",
                    "comment": "商品名称"
                  },
                  {
                    "name": "category",
                    "type": "varchar(100)",
                    "comment": "商品分类"
                  },
                  {
                    "name": "price",
                    "type": "decimal(10,2)",
                    "comment": "商品价格"
                  }
                ],
                "user_profile": [
                  {
                    "name": "user_id",
                    "type": "bigint",
                    "comment": "用户ID"
                  },
                  {
                    "name": "age",
                    "type": "int",
                    "comment": "年龄"
                  },
                  {
                    "name": "gender",
                    "type": "varchar(10)",
                    "comment": "性别"
                  },
                  {
                    "name": "city",
                    "type": "varchar(50)",
                    "comment": "城市"
                  },
                  {
                    "name": "registration_time",
                    "type": "datetime",
                    "comment": "注册时间"
                  }
                ]
              },
              "connection_info": {
                "host": "localhost",
                "port": 9030,
                "username": "root",
                "password": "password"
              }
            },
            "task_requirements": {
              "task_id": "task_001",
              "task_name": "销售数据分析报告",
              "task_description": "分析最近30天的销售数据，包括销售额趋势、用户行为分析和商品分类统计",
              "business_domain": "sales",
              "report_type": "dashboard",
              "priority": "high"
            },
            "time_constraints": {},
            "business_rules": {},
            "technical_constraints": {},
            "_merge_metadata": {
              "merge_strategy": "simple_merge",
              "context_count": 2,
              "merge_timestamp": "2025-09-05T08:26:12.443193"
            }
          },
          "used_contexts": [
            "pipeline_data_source",
            "pipeline_task"
          ],
          "context_weights": {
            "pipeline_data_source": 0.5555555555441244,
            "pipeline_task": 0.4444444444558756
          },
          "integration_confidence": 0.689382715798896,
          "processing_time_seconds": 0.000189,
          "warnings": [],
          "workflow": "multi_context_integration"
        },
        "task_supplement": {
          "total_requests": 2,
          "successful_supplements": 0,
          "failed_supplements": 2,
          "overall_confidence": 0.0,
          "processing_time_seconds": 0.000499,
          "individual_results": [
            {
              "placeholder_id": "pipeline_template_total_sales_amount",
              "success": false,
              "sql_query": "",
              "confidence_score": 0.0
            },
            {
              "placeholder_id": "pipeline_template_daily_sales_trend",
              "success": false,
              "sql_query": "",
              "confidence_score": 0.0
            }
          ],
          "workflow": "task_supplement"
        },
        "placeholder_to_sql": {
          "sql_query": "",
          "explanation": "SQL生成失败: Expecting value: line 1 column 1 (char 0)",
          "confidence_score": 0.0,
          "used_tables": [],
          "used_columns": [],
          "time_filters": [],
          "validation_errors": [
            "Expecting value: line 1 column 1 (char 0)"
          ],
          "correction_attempts": 0,
          "workflow": "placeholder_to_sql"
        }
      }
    },
    "agent_statistics": {
      "success": true,
      "total_requests": 2,
      "success_rate": 1.0,
      "average_execution_time": 0.0017855,
      "average_confidence": 0.75,
      "health_status": "healthy"
    }
  }
}