# Prompt ä¼˜åŒ–æ€»ç»“

**æ—¥æœŸ**: 2025-10-26
**ç‰ˆæœ¬**: 1.0
**çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

å‡å°‘ prompt çš„ token ä½¿ç”¨é‡ï¼Œæé«˜æ•ˆç‡ï¼ŒåŒæ—¶ä¿æŒå…³é”®ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚

**ä¼˜åŒ–ç­–ç•¥**ï¼š
1. âœ‚ï¸ ç§»é™¤é‡å¤è¯´æ˜
2. ğŸ“ ä½¿ç”¨ç®€æ´è¯­è¨€
3. ğŸ—œï¸ å‹ç¼© JSON æ ¼å¼
4. ğŸ”¤ ç®€åŒ–æ ‡é¢˜å’Œæ ¼å¼

---

## ğŸ“Š ä¼˜åŒ–æˆæœ

### æ€»ä½“æ•ˆæœ

| ç»„ä»¶ | ä¼˜åŒ–å‰ (ä¼°ç®—) | ä¼˜åŒ–å (ä¼°ç®—) | å‡å°‘ |
|------|--------------|--------------|------|
| ReAct Prompt | ~800 tokens | ~200 tokens | **-75%** |
| Task Context JSON | ~600 tokens | ~150 tokens | **-75%** |
| Schema Context | ~1000 tokens | ~600 tokens | **-40%** |
| Static Context Headers | ~50 tokens | ~20 tokens | **-60%** |
| **æ€»è®¡** | **~2450 tokens** | **~970 tokens** | **-60%** |

---

## ğŸ”§ å…·ä½“ä¼˜åŒ–

### 1. ReAct Prompt æ¨¡æ¿ä¼˜åŒ–

**æ–‡ä»¶**: `app/services/application/placeholder/placeholder_service.py:140-164`

#### ä¼˜åŒ–å‰ï¼ˆâŒ å†—é•¿ï¼Œ~800 tokensï¼‰

```python
task_prompt = f"""
ä½ æ˜¯ä¸€ä¸ªSQLç”Ÿæˆä¸“å®¶Agentã€‚è¯·ä½¿ç”¨å¯ç”¨çš„å·¥å…·å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š

## ä»»åŠ¡ç›®æ ‡
ç”Ÿæˆä¸€ä¸ªé«˜è´¨é‡çš„SQLæŸ¥è¯¢æ¥æ»¡è¶³ä»¥ä¸‹ä¸šåŠ¡éœ€æ±‚ï¼š

### ä¸šåŠ¡éœ€æ±‚
{request.business_command}

### å…·ä½“ç›®æ ‡
{request.target_objective or request.requirements}
{time_window_desc}

### æ•°æ®æºä¿¡æ¯
- æ•°æ®æºID: {data_source_config.get('data_source_id', 'N/A')}
- æ•°æ®åº“: {data_source_config.get('database_name', 'N/A')}

## âš ï¸ é‡è¦çº¦æŸ
1. **å¿…é¡»åŒ…å«æ—¶é—´è¿‡æ»¤æ¡ä»¶** - è¿™æ˜¯åŸºäºæ—¶é—´å‘¨æœŸçš„ç»Ÿè®¡æŸ¥è¯¢
2. **åªèƒ½ä½¿ç”¨å®é™…å­˜åœ¨çš„è¡¨å’Œåˆ—** - å¿…é¡»å…ˆæ¢ç´¢schema
3. **å¿…é¡»éªŒè¯SQLæ­£ç¡®æ€§** - ç¡®ä¿SQLå¯æ‰§è¡Œ
4. **ä½¿ç”¨å ä½ç¬¦æ ¼å¼** - æ—¶é—´è¿‡æ»¤ä½¿ç”¨ {{start_date}} å’Œ {{end_date}}
   âš ï¸ **å…³é”®è¦ç‚¹ï¼šå ä½ç¬¦å‘¨å›´ä¸è¦åŠ å¼•å·ï¼**
   - âœ… æ­£ç¡®: WHERE date BETWEEN {{start_date}} AND {{end_date}}
   - âŒ é”™è¯¯: WHERE date BETWEEN '{{start_date}}' AND '{{end_date}}'
   - **åŸå› **: å ä½ç¬¦æ›¿æ¢æ—¶ä¼šè‡ªåŠ¨æ·»åŠ å¼•å·ï¼Œå¦‚æœSQLä¸­å·²æœ‰å¼•å·ä¼šå¯¼è‡´åŒé‡å¼•å·è¯­æ³•é”™è¯¯

## å¯ç”¨å·¥å…·
ä½ æœ‰ä»¥ä¸‹å·¥å…·å¯ç”¨ï¼š
1. **schema.list_tables** - åˆ—å‡ºæ•°æ®æºä¸­çš„æ‰€æœ‰è¡¨
2. **schema.list_columns** - è·å–æŒ‡å®šè¡¨çš„åˆ—ä¿¡æ¯
3. **sql.validate** - éªŒè¯SQLçš„æ­£ç¡®æ€§
4. **sql.execute** - æ‰§è¡ŒSQLè¿›è¡Œæµ‹è¯•ï¼ˆä½¿ç”¨LIMITé™åˆ¶ï¼‰
5. **sql.refine** - åŸºäºé”™è¯¯ä¿¡æ¯ä¼˜åŒ–SQL

## æ¨èæµç¨‹ï¼ˆReActå¾ªç¯ï¼‰
1. ä½¿ç”¨ schema.list_tables æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„è¡¨
2. æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ç›¸å…³çš„è¡¨
3. ä½¿ç”¨ schema.list_columns è·å–è¿™äº›è¡¨çš„åˆ—ä¿¡æ¯
4. ç”ŸæˆSQLæŸ¥è¯¢ï¼ˆç¡®ä¿åŒ…å«æ—¶é—´è¿‡æ»¤ï¼Œ**å ä½ç¬¦ä¸åŠ å¼•å·**ï¼‰
5. ä½¿ç”¨ sql.validate éªŒè¯SQL
6. **å¦‚æœéªŒè¯å¤±è´¥ï¼ˆå¦‚åŒé‡å¼•å·é”™è¯¯ï¼‰**ï¼š
   - æ£€æŸ¥SQLä¸­å ä½ç¬¦å‘¨å›´æ˜¯å¦æœ‰å¼•å·
   - ç§»é™¤å ä½ç¬¦å‘¨å›´çš„å¼•å·
   - ä½¿ç”¨ sql.refine ä¼˜åŒ–SQL
   - é‡æ–°éªŒè¯ï¼ˆæœ€å¤šé‡è¯•3æ¬¡ï¼‰
7. éªŒè¯æˆåŠŸåï¼Œå¯é€‰æ‹©ä½¿ç”¨ sql.execute æµ‹è¯•SQL

## æœŸæœ›è¾“å‡º
æœ€ç»ˆè¿”å›ä¸€ä¸ªJSONæ ¼å¼çš„ç»“æœï¼š
{
    "sql": "SELECT ... WHERE dt BETWEEN {{start_date}} AND {{end_date}}",
    "reasoning": "è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¸ªSQLæ»¡è¶³ä¸šåŠ¡éœ€æ±‚",
    "tables_used": ["table1", "table2"],
    "has_time_filter": true,
    "time_column_used": "dt"
}

ç°åœ¨å¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œä½¿ç”¨å·¥å…·è¿›è¡Œæ¨ç†å’Œè¡ŒåŠ¨(ReAct)ï¼
"""
```

**é—®é¢˜**ï¼š
- âŒ å ä½ç¬¦è¯´æ˜é‡å¤äº†3æ¬¡
- âŒ å·¥å…·æè¿°è¿‡äºè¯¦ç»†
- âŒ æµç¨‹æ­¥éª¤å†—é•¿
- âŒ å¤§é‡çš„æ ‡é¢˜å’Œæ ¼å¼åŒ–ç¬¦å·

#### ä¼˜åŒ–åï¼ˆâœ… ç®€æ´ï¼Œ~200 tokensï¼Œå‡å°‘ 75%ï¼‰

```python
task_prompt = f"""
ç”ŸæˆSQL: {request.business_command}
{time_window_desc}

## çº¦æŸ
1. åŒ…å«æ—¶é—´è¿‡æ»¤: WHERE col BETWEEN {{{{start_date}}}} AND {{{{end_date}}}}
2. âš ï¸ å ä½ç¬¦ä¸åŠ å¼•å·
3. åªç”¨å®é™…å­˜åœ¨çš„è¡¨/åˆ—
4. éªŒè¯SQLæ­£ç¡®æ€§

## å·¥å…·
- schema.list_tables: åˆ—è¡¨
- schema.list_columns: åˆ—è¯¦æƒ…
- sql.validate: éªŒè¯
- sql.refine: ä¼˜åŒ–

## æµç¨‹
1. æ¢ç´¢schema
2. ç”ŸæˆSQL (å ä½ç¬¦ä¸åŠ å¼•å·)
3. éªŒè¯ â†’ å¤±è´¥åˆ™refine

## è¾“å‡ºJSON
{{"sql": "...", "reasoning": "...", "tables_used": [...], "has_time_filter": true}}
"""
```

**æ”¹è¿›**ï¼š
- âœ… ç§»é™¤å†—ä½™çš„è§’è‰²æè¿°å’Œä»»åŠ¡è¯´æ˜
- âœ… å ä½ç¬¦è¯´æ˜åªæ1æ¬¡
- âœ… å·¥å…·åˆ—è¡¨ç®€åŒ–ä¸ºå•è¡Œ
- âœ… æµç¨‹ç²¾ç®€ä¸º3æ­¥
- âœ… è¾“å‡ºæ ¼å¼å‹ç¼©

---

### 2. Task Context JSON å‹ç¼©

**æ–‡ä»¶**: `app/services/infrastructure/agents/facade.py:199-249`

#### ä¼˜åŒ–å‰ï¼ˆâŒ ~600 tokensï¼‰

```json
{
  "placeholder": {
    "id": "1b7bed9f-4185-48ed-9921-a48aa0a777e1",
    "description": "ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥",
    "type": "sql_generation_react",
    "granularity": "daily"
  },
  "task_context": {
    "task_time": 1761453701,
    "timezone": "Asia/Shanghai",
    "window": null
  },
  "constraints": {
    "sql_only": true,
    "output_kind": "sql",
    "max_attempts": 5,
    "policy_row_limit": null,
    "quality_min_rows": null
  },
  "data_source": {
    "name": "æµ‹è¯•-é”€å”®",
    "source_type": "doris",
    "fe_hosts": ["192.168.31.160"],
    "be_hosts": ["localhost"],
    "http_port": 8030,
    "query_port": 9030,
    "database": "retail_db",
    "username": "root",
    "password": "",
    "timeout": 30,
    "id": "908c9e22-2773-4175-955c-bc0231336698",
    "data_source_id": "908c9e22-2773-4175-955c-bc0231336698",
    "database_name": "retail_db",
    "semantic_type": "stat",
    "business_requirements": { ... }
  },
  "task_driven_context": {
    "mode": "react",
    "business_command": "ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥",
    "requirements": "ä¸ºå ä½ç¬¦ ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥ ç”ŸæˆSQL",
    "target_objective": "ä¸ºå ä½ç¬¦ ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥ ç”ŸæˆSQL",
    "enable_tools": true
  },
  "system_config": { ... }
}
```

#### ä¼˜åŒ–åï¼ˆâœ… ~150 tokensï¼Œå‡å°‘ 75%ï¼‰

```json
{
  "placeholder": {
    "id": "1b7bed9f-4185-48ed-9921-a48aa0a777e1",
    "desc": "ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥"
  },
  "data_source": {
    "id": "908c9e22-2773-4175-955c-bc0231336698",
    "db": "retail_db",
    "type": "doris"
  },
  "task_driven_context": {
    "mode": "react",
    "req": "ç»Ÿè®¡ï¼šè¯¥äº§å“æ€»æ”¶å…¥"
  },
  "task_context": {...},
  "constraints": {...}
}
```

**æ”¹è¿›**ï¼š
- âœ… ç§»é™¤å†—ä½™å­—æ®µï¼ˆfe_hosts, be_hosts, password ç­‰ï¼‰
- âœ… å­—æ®µåç¼©å†™ï¼ˆdescription â†’ desc, database â†’ db, requirements â†’ reqï¼‰
- âœ… ç§»é™¤é‡å¤ä¿¡æ¯ï¼ˆdata_source_id = idï¼‰
- âœ… ç´§å‡‘ JSON æ ¼å¼ï¼ˆæ— ç¼©è¿›ï¼‰
- âœ… ç§»é™¤ ```json ä»£ç å—åŒ…è£¹

---

### 3. Schema Context ä¼˜åŒ–

**æ–‡ä»¶**: `app/services/infrastructure/agents/context_retriever.py:433-470`

#### ä¼˜åŒ–å‰ï¼ˆâŒ ~1000 tokensï¼‰

```
# ğŸ“Š æ•°æ®è¡¨ç»“æ„ä¿¡æ¯

âš ï¸âš ï¸âš ï¸ **å…³é”®çº¦æŸ - è¯·åŠ¡å¿…éµå®ˆ** âš ï¸âš ï¸âš ï¸

ä½ **å¿…é¡»ä¸”åªèƒ½**ä½¿ç”¨ä»¥ä¸‹åˆ—å‡ºçš„è¡¨å’Œåˆ—ã€‚
**ç¦æ­¢è‡†é€ ä»»ä½•ä¸å­˜åœ¨çš„è¡¨åæˆ–åˆ—åï¼**

**è¿åæ­¤çº¦æŸå°†å¯¼è‡´**ï¼š
- âŒ SQL è¯­æ³•é”™è¯¯
- âŒ æ‰§è¡Œå¤±è´¥
- âŒ éªŒè¯ä¸é€šè¿‡
- âŒ ä»»åŠ¡å¤±è´¥

## å¯ç”¨çš„æ•°æ®è¡¨

### è¡¨ 1/1: `online_retail`

### è¡¨: online_retail
**è¯´æ˜**: åœ¨çº¿é›¶å”®è¡¨

**åˆ—ä¿¡æ¯**:
- **InvoiceNo** (VARCHAR) [NOT NULL]: å‘ç¥¨å·
- **StockCode** (VARCHAR): å•†å“ä»£ç 
- **Description** (VARCHAR): å•†å“æè¿°
- **Quantity** (INT): æ•°é‡
- **InvoiceDate** (DATETIME): å‘ç¥¨æ—¥æœŸ
- **UnitPrice** (DECIMAL(10,2)): å•ä»·
- **CustomerID** (INT): å®¢æˆ·ID
- **Country** (VARCHAR): å›½å®¶

## âœ… å¿…é¡»éµå®ˆçš„è§„åˆ™

1. âœ… **åªä½¿ç”¨ä¸Šè¿°è¡¨å’Œåˆ—**
   - è¡¨åå’Œåˆ—åå¿…é¡»**ç²¾ç¡®åŒ¹é…**
   - åŒºåˆ†å¤§å°å†™ï¼ˆä¾‹å¦‚ï¼š`InvoiceDate` â‰  `invoice_date`ï¼‰
   - æ³¨æ„ä¸‹åˆ’çº¿ï¼ˆä¾‹å¦‚ï¼š`online_retail` â‰  `onlineretail`ï¼‰

2. âœ… **ç¬¦åˆ Apache Doris è¯­æ³•**
   - ä¸æ”¯æŒ `FILTER (WHERE ...)` ç­‰ PostgreSQL ç‰¹æœ‰è¯­æ³•
   - ä½¿ç”¨ `CASE WHEN` æ›¿ä»£ `FILTER`

3. âŒ **ç¦æ­¢è‡†é€ è¡¨åæˆ–åˆ—å**
   - å¦‚æœéœ€è¦çš„è¡¨/åˆ—ä¸åœ¨ä¸Šè¿°åˆ—è¡¨ä¸­ï¼Œè¯·è¯´æ˜éœ€æ±‚

4. â° **æ—¶é—´å ä½ç¬¦ä¸åŠ å¼•å·**
   - âœ… æ­£ç¡®ï¼š`WHERE dt BETWEEN {{start_date}} AND {{end_date}}`
   - âŒ é”™è¯¯ï¼š`WHERE dt BETWEEN '{{start_date}}' AND '{{end_date}}'`
```

#### ä¼˜åŒ–åï¼ˆâœ… ~600 tokensï¼Œå‡å°‘ 40%ï¼‰

```
# æ•°æ®è¡¨ç»“æ„

âš ï¸ **åªèƒ½ä½¿ç”¨ä»¥ä¸‹è¡¨å’Œåˆ—ï¼Œç¦æ­¢è‡†é€ ï¼**

## å¯ç”¨è¡¨

### online_retail
### è¡¨: online_retail

**åˆ—ä¿¡æ¯**:
- **InvoiceNo** (VARCHAR) [NOT NULL]: å‘ç¥¨å·
- **StockCode** (VARCHAR): å•†å“ä»£ç 
- **Description** (VARCHAR): å•†å“æè¿°
- **Quantity** (INT): æ•°é‡
- **InvoiceDate** (DATETIME): å‘ç¥¨æ—¥æœŸ
- **UnitPrice** (DECIMAL(10,2)): å•ä»·
- **CustomerID** (INT): å®¢æˆ·ID
- **Country** (VARCHAR): å›½å®¶

## è§„åˆ™
1. è¡¨/åˆ—åç²¾ç¡®åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
2. ä½¿ç”¨ Apache Doris è¯­æ³•ï¼ˆ`CASE WHEN`ï¼Œä¸æ”¯æŒ`FILTER`ï¼‰
3. æ—¶é—´å ä½ç¬¦ä¸åŠ å¼•å·: `WHERE dt BETWEEN {{start_date}} AND {{end_date}}`
```

**æ”¹è¿›**ï¼š
- âœ… ç®€åŒ–çº¦æŸè¯´æ˜ï¼ˆå»æ‰é‡å¤å¼ºè°ƒï¼‰
- âœ… ç§»é™¤è¡¨ç¼–å·ï¼ˆ`è¡¨ 1/1:`ï¼‰
- âœ… ç²¾ç®€è§„åˆ™è¯´æ˜ï¼ˆåˆå¹¶é‡å¤å†…å®¹ï¼‰
- âœ… ç§»é™¤å†—é•¿çš„åæœåˆ—è¡¨

---

### 4. Static Context Headers ä¼˜åŒ–

**æ–‡ä»¶**: `app/services/infrastructure/agents/facade.py:185-197`

#### ä¼˜åŒ–å‰ï¼ˆâŒ ~50 tokensï¼‰

```
### ç”¨æˆ·éœ€æ±‚
{request.prompt}

### æ‰§è¡Œé˜¶æ®µ
task_execution

### å·¥ä½œæ¨¡å¼
react
```

#### ä¼˜åŒ–åï¼ˆâœ… ~20 tokensï¼Œå‡å°‘ 60%ï¼‰

```
# éœ€æ±‚
{request.prompt}

# é˜¶æ®µ
task_execution | react
```

**æ”¹è¿›**ï¼š
- âœ… ç®€åŒ–æ ‡é¢˜ï¼ˆ`###` â†’ `#`ï¼‰
- âœ… åˆå¹¶é˜¶æ®µå’Œæ¨¡å¼ä¸ºå•è¡Œ

---

## ğŸ“Š Token ä½¿ç”¨é‡å¯¹æ¯”

### å®Œæ•´ Prompt ç¤ºä¾‹

#### ä¼˜åŒ–å‰

```
=== Static Context ===
### ç”¨æˆ·éœ€æ±‚
ç”ŸæˆSQL: ç»Ÿè®¡è¯¥äº§å“æ€»æ”¶å…¥
...

### æ‰§è¡Œé˜¶æ®µ
task_execution

### å·¥ä½œæ¨¡å¼
react

### ä»»åŠ¡ä¸Šä¸‹æ–‡
```json
{
  "placeholder": {...},  // å¤§é‡å†—ä½™å­—æ®µ
  ...
}
```

=== Schema Context ===
# ğŸ“Š æ•°æ®è¡¨ç»“æ„ä¿¡æ¯

âš ï¸âš ï¸âš ï¸ **å…³é”®çº¦æŸ - è¯·åŠ¡å¿…éµå®ˆ** âš ï¸âš ï¸âš ï¸
...ï¼ˆå¤§é‡é‡å¤è¯´æ˜ï¼‰

=== ReAct Prompt ===
ä½ æ˜¯ä¸€ä¸ªSQLç”Ÿæˆä¸“å®¶Agentã€‚è¯·ä½¿ç”¨å¯ç”¨çš„å·¥å…·å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š
...ï¼ˆå†—é•¿çš„è¯´æ˜ï¼‰

æ€»è®¡: ~2450 tokens
```

#### ä¼˜åŒ–å

```
=== Static Context ===
# éœ€æ±‚
ç”ŸæˆSQL: ç»Ÿè®¡è¯¥äº§å“æ€»æ”¶å…¥

# é˜¶æ®µ
task_execution | react

### ä»»åŠ¡ä¸Šä¸‹æ–‡
{"placeholder":{"id":"...","desc":"..."},"data_source":{"id":"...","db":"...","type":"..."}}

=== Schema Context ===
# æ•°æ®è¡¨ç»“æ„

âš ï¸ **åªèƒ½ä½¿ç”¨ä»¥ä¸‹è¡¨å’Œåˆ—ï¼Œç¦æ­¢è‡†é€ ï¼**

### online_retail
- **InvoiceNo** (VARCHAR) [NOT NULL]: å‘ç¥¨å·
...

## è§„åˆ™
1. è¡¨/åˆ—åç²¾ç¡®åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
2. ä½¿ç”¨ Apache Doris è¯­æ³•
3. æ—¶é—´å ä½ç¬¦ä¸åŠ å¼•å·

=== ReAct Prompt ===
ç”ŸæˆSQL: ç»Ÿè®¡è¯¥äº§å“æ€»æ”¶å…¥

## çº¦æŸ
1. åŒ…å«æ—¶é—´è¿‡æ»¤
2. âš ï¸ å ä½ç¬¦ä¸åŠ å¼•å·
...

æ€»è®¡: ~970 tokens (å‡å°‘ 60%)
```

---

## ğŸ¯ ä¼˜åŒ–åŸåˆ™

1. **ä¿ç•™å…³é”®ä¿¡æ¯**ï¼š
   - âœ… æ ¸å¿ƒçº¦æŸï¼ˆå ä½ç¬¦ä¸åŠ å¼•å·ï¼‰
   - âœ… å¿…è¦çš„è¡¨ç»“æ„ä¿¡æ¯
   - âœ… å·¥å…·åˆ—è¡¨

2. **ç§»é™¤å†—ä½™**ï¼š
   - âŒ é‡å¤çš„è¯´æ˜
   - âŒ è¿‡äºè¯¦ç»†çš„æ­¥éª¤æè¿°
   - âŒ å†—é•¿çš„åæœåˆ—è¡¨
   - âŒ ä¸å¿…è¦çš„ JSON å­—æ®µ

3. **ç®€åŒ–æ ¼å¼**ï¼š
   - ğŸ“ ä½¿ç”¨ç®€æ´çš„æ ‡é¢˜
   - ğŸ“ å•è¡Œè¡¨è¾¾ï¼ˆåˆå¹¶ç›¸å…³ä¿¡æ¯ï¼‰
   - ğŸ“ ç´§å‡‘ JSONï¼ˆæ— ç¼©è¿›ï¼‰

4. **ä¼˜å…ˆçº§ç®¡ç†**ï¼š
   - ğŸ”¥ CRITICAL: ç”¨æˆ·éœ€æ±‚ã€æ ¸å¿ƒçº¦æŸ
   - ğŸ”¥ HIGH: Schema ä¿¡æ¯ã€å·¥å…·åˆ—è¡¨
   - ğŸ”¥ MEDIUM/LOW: è¯¦ç»†è§„åˆ™ã€ç¤ºä¾‹

---

## âœ… æ€»ç»“

é€šè¿‡ç³»ç»Ÿæ€§çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬ï¼š

1. âœ… **å‡å°‘äº† 60% çš„ prompt tokens**ï¼ˆ2450 â†’ 970ï¼‰
2. âœ… **ä¿ç•™äº†æ‰€æœ‰å…³é”®ä¿¡æ¯**ï¼ˆçº¦æŸã€schemaã€å·¥å…·ï¼‰
3. âœ… **æé«˜äº†å¯è¯»æ€§**ï¼ˆæ›´ç®€æ´æ¸…æ™°ï¼‰
4. âœ… **åŠ å¿«äº†å“åº”é€Ÿåº¦**ï¼ˆæ›´å°‘çš„ tokens æ„å‘³ç€æ›´å¿«çš„å¤„ç†ï¼‰

**å…³é”®æˆæœ**ï¼š
- ReAct Prompt: **-75%**
- Task Context: **-75%**
- Schema Context: **-40%**
- Headers: **-60%**

**é¢„æœŸæ•ˆæœ**ï¼š
- ğŸš€ æ›´å¿«çš„ LLM å“åº”
- ğŸ’° æ›´ä½çš„ API æˆæœ¬
- ğŸ“Š æ›´å¥½çš„ token é¢„ç®—ç®¡ç†
- âœ¨ æ›´æ¸…æ™°çš„ prompt ç»“æ„

---

**ä½œè€…**: AI Assistant
**å®¡æ ¸**: å¾…å®š
**æœ€åæ›´æ–°**: 2025-10-26
